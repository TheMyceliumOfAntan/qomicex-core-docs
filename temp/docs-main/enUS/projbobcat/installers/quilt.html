<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Quilt 安装器 | Qomicex.Core API文档 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Quilt 安装器 | Qomicex.Core API文档 ">
      
      
      <link rel="icon" href="../../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/TheMyceliumOfAntan/Qomicex.Avalonia/blob/main/Qomicex.Docs/temp/docs-main/enUS/projbobcat/installers/quilt.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../../index.html">
            <img id="logo" class="svg" src="../../../../../logo.svg" alt="Qomicex.Core">
            Qomicex.Core
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="quilt-安装器">Quilt 安装器</h1>

<p>[[toc]]</p>
<p>::: tip</p>
<p>Please note that ProjBobcat only implements the Quilt automated installation process. You still need to implement the search, download, and save process of the Quilt installation package yourself.</p>
<p>:::</p>
<p>::: warning</p>
<p>The Quilt installer is currently in an experimental stage, and the related API and installation process may undergo significant changes.</p>
<p>:::</p>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://quiltmc.org/en/">Quilt Website</a></li>
<li><a href="https://quiltmc.org/en/install/">Quilt Documentation</a></li>
<li><a href="https://meta.quiltmc.org/">Quilt Meta API</a></li>
</ul>
<h2 id="compatibility-check">Compatibility check</h2>
<p>Before you start installing Quilt, you need to query whether the version of MineCraft you are modifying is supported via the Quilt Meta API.</p>
<p>First, you need to send an <strong>HTTP GET</strong> request to <a href="https://meta.quiltmc.org/v3/versions/game">https://meta.quiltmc.org/v3/versions/game</a>.</p>
<p>You will see something similar to the following returned:</p>
<pre><code class="lang-json">
[
  {
    &quot;version&quot;: &quot;1.19.3&quot;,
    &quot;stable&quot;: true
  },
  {
    &quot;version&quot;: &quot;1.19.3-rc3&quot;,
    &quot;stable&quot;: false
  },
  {...},
  {...}
]

</code></pre>
<p>Here, you need to check whether the game version you are about to install appears in Quilt's official support list.
You need to compare the game version with the <code>version</code> field in the JSON object.
**If your game does not appear on the support list, the installation will not continue. **</p>
<h2 id="get-quilt-loader-model">Get Quilt Loader Model</h2>
<p>Because ProjBobcat's Quilt installer requires you to provide download information from Quilt when initializing the installer.
Therefore, we will briefly describe here how to obtain this information based on a given MineCraft version.</p>
<p>::: info</p>
<p>In this example, we'll be using Minecraft version 1.19.2 to show you how to get it.</p>
<p>:::</p>
<p>First, you need to send an <strong>HTTP GET</strong> request to <a href="https://meta.quiltmc.org/v3/versions/loader">https://meta.quiltmc.org/v3/versions/loader</a>.</p>
<p>You will see something similar to the following returned:</p>
<pre><code class="lang-json">
[
  {
    &quot;separator&quot;: &quot;.&quot;,
    &quot;build&quot;: 25,
    &quot;maven&quot;: &quot;org.quiltmc:quilt-loader:0.18.1-beta.25&quot;,
    &quot;version&quot;: &quot;0.18.1-beta.25&quot;
  },
  {...},
  {...}
]

</code></pre>
<p>Quilt Meta API will return a JSON array, and each element in the array is the Loader Artifact we need.</p>
<h4 id="convert-json-return-to-projbobcat-type">Convert JSON return to ProjBobcat type</h4>
<p>If you are using <a href="https://www.newtonsoft.com/json">JSON.NET</a>(Newtonsoft.JSON) in your project.
You can use code similar to the following to convert the server response you get into the corresponding ProjBobcat type:</p>
<pre><code class="lang-c#">
// Requesting data from the Quilt Meta API (example, not actual code)
...
var responseJson = await res.Content.ReadAsStringAsync();

// Convert JSON response to ProjBobcat type // [!code focus]
var artifacts = JsonConvert.DeserializeObject&lt;List&lt;QuiltLoaderModel&gt;&gt;(responseJson); // [!code focus]

// Get the version the user wants to install (example, not actual code)
var userSelect = vm.SelectedArtifactIndex;

// Get a single Loader Artifact // [!code focus]
var selectedArtifact = artifacts[userSelect]; // [!code focus]

</code></pre>
<p>This <strong>selectedArtifact</strong> is the <code>QuiltLoaderModel</code> required by the Fabric installer.</p>
<h2 id="initialize-the-installer">Initialize the installer</h2>
<p>Initializing the Quilt installer is very simple. You need to use the <code>selectedArtifact</code> obtained in the previous step to initialize the installer:</p>
<pre><code class="lang-c#">
var quiltInstaller = new QuiltInstaller
{
    InheritsFrom = &quot;[MC_VERSION_OR_GAME_ID]&quot;,
    RootPath = &quot;[GAME_ROOT_PATH]&quot;,
    CustomId = &quot;[CUSTOM_INSTALL_GAME_ID]&quot;,
    LoaderArtifact = selectedArtifact
};

</code></pre>
<p>In the above code block, please replace these parameters according to your actual situation:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Project</th>
<th style="text-align: center;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">[GAME_ROOT_PATH]</td>
<td style="text-align: center;">The game root directory, usually the path to the .minecraft folder</td>
</tr>
<tr>
<td style="text-align: center;">[CUSTOM_INSTALL_GAME_ID]</td>
<td style="text-align: center;">Optional, customize the name of the game to be installed</td>
</tr>
<tr>
<td style="text-align: center;">[MC_VERSION_OR_GAME_ID]</td>
<td style="text-align: center;">The Minecraft original game version inherited by Forge, usually the game version. For example: 1.19.2</td>
</tr>
</tbody>
</table>
<h2 id="start-installation">start installation</h2>
<p>After you complete the initialization of the installer, you only need to call the installation method of the Fabric installer to complete the installation.</p>
<p>In an asynchronous context, use <strong>InstallTaskAsync</strong> to complete the installation:</p>
<pre><code class="lang-c#">
await quiltInstaller.InstallTaskAsync();

</code></pre>
<p>In a sync context, use <strong>Install</strong> to complete the installation:</p>
<pre><code class="lang-c#">
quiltInstaller.Install();

</code></pre>
<h2 id="report-installation-progress">Report installation progress</h2>
<p>In some cases, the Quilt installer may take several minutes to complete the installation.
Therefore, you may need to report the current progress of the installer to the user in real time.
For this purpose, the Quilt installer provides the <strong>StageChangedEventDelegate</strong> event to help you implement task reporting.
You simply need to register for the following event <strong>before starting the installation</strong>:</p>
<pre><code class="lang-c#">
quiltInstaller.StageChangedEventDelegate += (_, args) =&gt; {
    ReportProgress(args.Progress, args.CurrentStage);
};

</code></pre>
<p>Among them, <strong>args.Progress</strong> indicates the current percentage progress of the installer. <strong>args.CurrentStage</strong> is a text description of the current progress of the installer.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/TheMyceliumOfAntan/Qomicex.Avalonia/blob/main/Qomicex.Docs/temp/docs-main/enUS/projbobcat/installers/quilt.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Qomicex.Avalonia
        </div>
      </div>
    </footer>
  </body>
</html>
