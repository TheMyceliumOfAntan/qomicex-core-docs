<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Forge installer | Qomicex.Core API文档 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Forge installer | Qomicex.Core API文档 ">
      
      
      <link rel="icon" href="../../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/TheMyceliumOfAntan/Qomicex.Avalonia/blob/main/Qomicex.Docs/temp/docs-main/enUS/projbobcat/installers/forge.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../../index.html">
            <img id="logo" class="svg" src="../../../../../logo.svg" alt="Qomicex.Core">
            Qomicex.Core
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="forge-installer">Forge installer</h1>

<p>In ProjBobcat, we support automated Forge installations for almost all major MineCraft versions.</p>
<p>[[toc]]</p>
<p>::: tip</p>
<p>Please note that ProjBobcat only implements the Forge automated installation process. You still need to implement the search, download, and save process of the Forge installation package yourself.</p>
<p>:::</p>
<h2 id="determine-which-forge-installer-should-be-used">Determine which Forge installer should be used</h2>
<p>Because the Forge team has modified Forge's packaging specifications and installation process in subsequent versions. Therefore, you need to manually determine which installer to use.
In ProjBobcat, we have implemented the relevant judgment logic for you. You just need to simply call the following method:</p>
<pre><code class="lang-c#">
var mcVersion = &quot;[MC_VERSION]&quot;;
var forgeJarPath = &quot;[PATH_TO_YOUR_FORGE_INSTALLER]&quot;;
var forgeVersion = ForgeInstallerFactory.GetForgeArtifactVersion(mcVersion, &quot;[FORGE_VERSION]&quot;);

var isLegacy = ForgeInstallerFactory.IsLegacyForgeInstaller(forgeJarPath, forgeVersion);  // [!code focus]

</code></pre>
<p>In the above code block, please replace these parameters according to your actual situation:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Project</th>
<th style="text-align: center;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">[MC_VERSION]</td>
<td style="text-align: center;">The Minecraft version to install Forge into, for example: 1.19.2</td>
</tr>
<tr>
<td style="text-align: center;">[PATH_TO_YOUR_FORGE_INSTALLER]</td>
<td style="text-align: center;">The path to the Forge installer .jar file</td>
</tr>
<tr>
<td style="text-align: center;">[FORGE_VERSION]</td>
<td style="text-align: center;">The specific version of Forge, usually XX.X.X, for example: 43.2.0</td>
</tr>
</tbody>
</table>
<p>After you complete the replacement and successfully execute the above code snippet, <strong>isLegacy</strong> will indicate which Forge installer the current Forge installer should use.</p>
<h2 id="initialize-legacy-installer">Initialize legacy installer</h2>
<p>If in the above process, the value of <strong>isLegacy</strong> is <strong>true</strong>, it means that you need to use a legacy installer to complete the Forge installation.
To initialize the legacy installer, simply instantiate <strong>LegacyForgeInstaller</strong> and provide the appropriate parameters:</p>
<pre><code class="lang-c#">
IForgeInstaller forgeInstaller =
    new LegacyForgeInstaller
            {
                ForgeExecutablePath = &quot;[PATH_TO_YOUR_FORGE_INSTALLER]&quot;,
                RootPath = &quot;[GAME_ROOT_PATH]&quot;,
                CustomId = &quot;[CUSTOM_INSTALL_GAME_ID]&quot;,
                ForgeVersion = &quot;[FORGE_VERSION]&quot;,
                InheritsFrom = &quot;[MC_VERSION_OR_GAME_ID]&quot;
            };

</code></pre>
<p>In the above code block, please replace these parameters according to your actual situation:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Project</th>
<th style="text-align: center;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">[GAME_ROOT_PATH]</td>
<td style="text-align: center;">The game root directory, usually the path to the <strong>.minecraft</strong> folder</td>
</tr>
<tr>
<td style="text-align: center;">[CUSTOM_INSTALL_GAME_ID]</td>
<td style="text-align: center;">Optional, customize the name of the game to be installed</td>
</tr>
<tr>
<td style="text-align: center;">[MC_VERSION_OR_GAME_ID]</td>
<td style="text-align: center;">The MineCraft original game version inherited by Forge, usually the game version. For example: 1.19.2</td>
</tr>
</tbody>
</table>
<h2 id="initialize-the-new-version-of-the-installer">Initialize the new version of the installer</h2>
<pre><code class="lang-c#">
IForgeInstaller forgeInstaller =
    new HighVersionForgeInstaller
            {
                ForgeExecutablePath = &quot;[PATH_TO_YOUR_FORGE_INSTALLER]&quot;,
                JavaExecutablePath = &quot;[PATH_TO_YOUR_JAVA_RUNTIME]&quot;,
                RootPath = &quot;[GAME_ROOT_PATH]&quot;,
                VersionLocator = [VERSION_LOCATOR_INST],
                DownloadUrlRoot = “[LIBRARIES_URL_ROOT]”,
                CustomId = &quot;[CUSTOM_INSTALL_GAME_ID]&quot;,
                MineCraftVersion = &quot;[MC_VERSION]&quot;,
                MineCraftVersionId = &quot;[ACTUAL_MC_GAME_ID]&quot;,
                InheritsFrom = &quot;[MC_VERSION_OR_GAME_ID]&quot;
            };

</code></pre>
<p>In the above code block, please replace these parameters according to your actual situation:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Project</th>
<th style="text-align: center;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">[PATH_TO_YOUR_JAVA_RUNTIME]</td>
<td style="text-align: center;">The path where Java (javaw.exe) runtime is located</td>
</tr>
<tr>
<td style="text-align: center;">[LIBRARIES_URL_ROOT]</td>
<td style="text-align: center;">The root URL of the download source, for example: &quot;https://bmclapi2.bangbang93.com/&quot;</td>
</tr>
<tr>
<td style="text-align: center;">[VERSION_LOCATOR_INST]</td>
<td style="text-align: center;">Game version locator instance, that is, the <strong>VersionLocator</strong> attribute when initializing the game core</td>
</tr>
<tr>
<td style="text-align: center;">[ACTUAL_MC_GAME_ID]</td>
<td style="text-align: center;">The actual MineCraft game name, the name of the original game in the <strong>version</strong> folder. Normally, this value is consistent with <strong>[MC_VERSION]</strong>.</td>
</tr>
</tbody>
</table>
<h2 id="uniform-initialization-based-on-islegacy-value">Uniform initialization based on <strong>isLegacy</strong> value</h2>
<p>Because <strong>LegacyForgeInstaller</strong> and <strong>HighVersionForgeInstaller</strong> both implement the <strong>IForgeInstaller</strong> interface.
Therefore, you can easily use a ternary operator to selectively initialize the corresponding installer:</p>
<pre><code class="lang-c#{4-100}">
var isLegacy = ForgeInstallerFactory.IsLegacyForgeInstaller(forgeJarPath, forgeVersion);

IForgeInstaller forgeInstaller = isLegacy
            ? new LegacyForgeInstaller
            {
                ForgeExecutablePath = &quot;[PATH_TO_YOUR_FORGE_INSTALLER]&quot;,
                RootPath = &quot;[GAME_ROOT_PATH]&quot;,
                CustomId = &quot;[CUSTOM_INSTALL_GAME_ID]&quot;,
                ForgeVersion = &quot;[FORGE_VERSION]&quot;,
                InheritsFrom = &quot;[MC_VERSION_OR_GAME_ID]&quot;
            }
            : new HighVersionForgeInstaller
            {
                ForgeExecutablePath = &quot;[PATH_TO_YOUR_FORGE_INSTALLER]&quot;,
                JavaExecutablePath = &quot;[PATH_TO_YOUR_JAVA_RUNTIME]&quot;,
                RootPath = &quot;[GAME_ROOT_PATH]&quot;,
                VersionLocator = [VERSION_LOCATOR_INST],
                DownloadUrlRoot = “[LIBRARIES_URL_ROOT]”,
                CustomId = &quot;[CUSTOM_INSTALL_GAME_ID]&quot;,
                MineCraftVersion = &quot;[MC_VERSION]&quot;,
                MineCraftVersionId = &quot;[ACTUAL_MC_GAME_ID]&quot;,
                InheritsFrom = &quot;[MC_VERSION_OR_GAME_ID]&quot;
            };

</code></pre>
<h2 id="start-installation">Start installation</h2>
<p>After you complete the initialization of the installer, you only need to call the installation method of the Forge installer to complete the installation.</p>
<p>In an asynchronous context, use <strong>InstallForgeTaskAsync</strong> to complete the installation:</p>
<pre><code class="lang-c#">
await forgeInstaller.InstallForgeTaskAsync();

</code></pre>
<p>In a sync context, use <strong>InstallForge</strong> to complete the installation:</p>
<pre><code class="lang-c#">
forgeInstaller.InstallForge();

</code></pre>
<h2 id="report-installation-progress">Report installation progress</h2>
<p>In some cases, the Forge installer may take several minutes to complete the installation.
Therefore, you may need to report the current progress of the installer to the user in real time.
For this purpose, the Forge installer provides the <strong>StageChangedEventDelegate</strong> event to help you implement task reporting.
You simply need to register for the following event <strong>before starting the installation</strong>:</p>
<pre><code class="lang-c#">
((InstallerBase)forgeInstaller).StageChangedEventDelegate += (_, args) =&gt;
{
    ReportProgress(args.Progress * 100, args.CurrentStage);
};

</code></pre>
<p>Among them, <strong>args.Progress</strong> indicates the current percentage progress of the installer. <strong>args.CurrentStage</strong> is a text description of the current progress of the installer.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/TheMyceliumOfAntan/Qomicex.Avalonia/blob/main/Qomicex.Docs/temp/docs-main/enUS/projbobcat/installers/forge.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Qomicex.Avalonia
        </div>
      </div>
    </footer>
  </body>
</html>
